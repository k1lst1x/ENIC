{% extends "base.html" %}
{% load lang_tags %}
{% load static %}

{% block content %}

    <section class="hero-slider">
        <div class="slider-container">
            <div class="slider-track" id="sliderTrack">

                {% for slide in slides %}
                    <div class="slide {% if forloop.first %}active{% endif %}">
                        <img src="{{ slide.banner_image.url }}"
                             alt="
                                {% if current_lang_code == "kk" and slide.title_kz %}
                                    {{ slide.title_kz }}
                                {% elif current_lang_code == "en" and slide.title_en %}
                                    {{ slide.title_en }}
                                {% else %}
                                    {{ slide.title_ru }}
                                {% endif %}"
                             class="slide-image">
                        <div class="slide-overlay"></div>
                        <div class="slide-content">
                            <div class="container">
                                <h2 class="slide-title">
                                    {% if current_lang_code == "kk" and slide.title_kz %}
                                        {{ slide.title_kz }}
                                    {% elif current_lang_code == "en" and slide.title_en %}
                                        {{ slide.title_en }}
                                    {% else %}
                                        {{ slide.title_ru }}
                                    {% endif %}
                                </h2>
                                <p class="slide-description">
                                    {% if current_lang_code == "kk" and slide.small_description_kz %}
                                        {{ slide.small_description_kz }}
                                    {% elif current_lang_code == "en" and slide.small_description_en %}
                                        {{ slide.small_description_en }}
                                    {% else %}
                                        {{ slide.small_description_ru }}
                                    {% endif %}
                                </p>
                                <a href="{% url 'news_detail' slide.pk %}"
                                   class="button primary-button">{% tr "Подробнее" %}</a>
                            </div>
                        </div>
                    </div>
                {% endfor %}
            </div>

            <!-- === Slider Navigation === -->
            <button class="slider-nav prev" aria-label="{% tr 'Предыдущий слайд' %}">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                     stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon">
                    <polyline points="15 18 9 12 15 6"></polyline>
                </svg>
            </button>
            <button class="slider-nav next" aria-label="{% tr 'Следующий слайд' %}">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                     stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon">
                    <polyline points="9 18 15 12 9 6"></polyline>
                </svg>
            </button>

            <!-- === Indicators === -->
            <div class="slider-indicators">
                {% for slide in slides %}
                    <button class="indicator {% if forloop.first %}active{% endif %}"
                            data-slide="{{ forloop.counter0 }}" aria-label="Slide {{ forloop.counter }}"></button>
                {% endfor %}
                {#                <button class="indicator" data-slide="1" aria-label="{% tr 'Слайд 2' %}"></button>#}
                {#                <button class="indicator" data-slide="2" aria-label="{% tr 'Слайд 3' %}"></button>#}
            </div>
        </div>
    </section>

    <!-- === Services Grid === -->
    <section class="services-grid">
        <div class="container">
            <h2 class="section-title">{% tr "Основные сервисы" %}</h2>
            <div class="services-container">

                <!-- Service 1 -->
                <a href="{% url 'op_po' %}" class="service-card" target="_blank">
                    <div class="service-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                             stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                             class="icon">
                            <path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"></path>
                            <path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"></path>
                        </svg>
                    </div>
                    <h3 class="service-title">{% tr "30 ОП ПО" %}</h3>
                    <p class="service-description">{% tr "Образовательные программы профессионального обучения" %}</p>
                </a>

                <!-- Service 2 -->
                <a href="{% url 'faq' %}" class="service-card" target="_blank">
                    <div class="service-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                             stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                             class="icon">
                            <circle cx="12" cy="12" r="10"></circle>
                            <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path>
                            <line x1="12" y1="17" x2="12.01" y2="17"></line>
                        </svg>
                    </div>
                    <h3 class="service-title">{% tr "Часто задаваемые вопросы" %}</h3>
                    <p class="service-description">{% tr "Ответы на популярные вопросы" %}</p>
                </a>

                <!-- Service 3 -->
                <a href="{% url 'quality' %}" class="service-card" target="_blank">
                    <div class="service-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                             stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                             class="icon">
                            <circle cx="12" cy="8" r="7"></circle>
                            <polyline points="8.21 13.89 7 23 12 20 17 23 15.79 13.88"></polyline>
                        </svg>
                    </div>
                    <h3 class="service-title">{% tr "Система внутреннего обеспечения качества" %}</h3>
                    <p class="service-description">{% tr "Стандарты и процедуры обеспечения качества" %}</p>
                </a>

                <!-- Service 4 -->
                <a href="{% url 'academic_integrity' %}" class="service-card" target="_blank">
                    <div class="service-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                             stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                             class="icon">
                            <path d="M9 11l3 3L22 4"></path>
                            <path d="M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"></path>
                        </svg>
                    </div>
                    <h3 class="service-title">{% tr "Академическая честность" %}</h3>
                    <p class="service-description">{% tr "Принципы и политика академической честности" %}</p>
                </a>

                <!-- Service 5 -->
                <a href="{% url 'kazakhstan_in_bologna_process' %}" class="service-card" target="_blank">
                    <div class="service-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                             stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                             class="icon">
                            <circle cx="12" cy="12" r="10"></circle>
                            <line x1="2" y1="12" x2="22" y2="12"></line>
                            <path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"></path>
                        </svg>
                    </div>
                    <h3 class="service-title">{% tr "Сопредседательство Казахстана в Болонском процессе" %}</h3>
                    <p class="service-description">{% tr "Информация о сопредседательстве" %}</p>
                </a>

                <!-- Service 6 -->
                <a href="{% url 'research' %}"
                   class="service-card" target="_blank">
                    <div class="service-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                             stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                             class="icon">
                            <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path>
                            <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"></path>
                        </svg>
                    </div>
                    <h3 class="service-title">{% tr "Научные исследования" %}</h3>
                    <p class="service-description">{% tr "Исследовательская деятельность центра" %}</p>
                </a>

                <!-- Service 7 -->
                <a href="{% url 'reviews' %}" class="service-card"
                   target="_blank">
                    <div class="service-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                             stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                             class="icon">
                            <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
                        </svg>
                    </div>
                    <h3 class="service-title">{% tr "Отзывы" %}</h3>
                    <p class="service-description">{% tr "Отзывы о работе центра" %}</p>
                </a>

                <!-- Service 8 -->
                <a href="{% url 'accreditation' %}" class="service-card" target="_blank">
                    <div class="service-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                             stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                             class="icon">
                            <polyline points="9 11 12 14 22 4"></polyline>
                            <path d="M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"></path>
                        </svg>
                    </div>
                    <h3 class="service-title">{% tr "Аккредитация" %}</h3>
                    <p class="service-description">{% tr "Информация об аккредитации" %}</p>
                </a>

                <!-- Service 9 -->
                <a href="https://enic-kazakhstan.edu.kz/korporativnaya-etika-i-protivodeystvie-korrupcionnym-riskam/svedeniya-ob-upolnomochennom-po-etike-i-protivodeystviyu-korrupcionnym-riskam"
                   class="service-card" target="_blank">
                    <div class="service-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                             stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                             class="icon">
                            <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path>
                        </svg>
                    </div>
                    <h3 class="service-title">{% tr "Корпоративная этика и противодействие коррупционным рискам" %}</h3>
                    <p class="service-description">{% tr "Политика и меры противодействия коррупции" %}</p>
                </a>

                <!-- Service 10 -->
                <a href="https://enic-kazakhstan.edu.kz/luchshaya-praktika-distancionnogo-obucheniya-v-vuzah-rk/kyzylordinskiy-gosudarstvennyy-universitet-imeni-korkyt-ata-1"
                   class="service-card" target="_blank">
                    <div class="service-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                             stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                             class="icon">
                            <rect x="2" y="3" width="20" height="14" rx="2" ry="2"></rect>
                            <line x1="8" y1="21" x2="16" y2="21"></line>
                            <line x1="12" y1="17" x2="12" y2="21"></line>
                        </svg>
                    </div>
                    <h3 class="service-title">{% tr "Лучшая практика дистанционного обучения" %}</h3>
                    <p class="service-description">{% tr "Рекомендации по дистанционному обучению" %}</p>
                </a>

                <!-- Service 11 -->
                <a href="https://enic-kazakhstan.edu.kz/mezhdunarodnye-proekty/peredovoy-centr-dlya-doktorantov-phd-i-molodyh-issledovateley-v-oblasti-informatiki-acesyri-610166-epp-1-2019-1-sk-eppka2-cbhe-jp-acesyri-1"
                   class="service-card" target="_blank">
                    <div class="service-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                             stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                             class="icon">
                            <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                            <circle cx="9" cy="7" r="4"></circle>
                            <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
                            <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
                        </svg>
                    </div>
                    <h3 class="service-title">{% tr "Международные проекты" %}</h3>
                    <p class="service-description">{% tr "Международное сотрудничество и проекты" %}</p>
                </a>

                <!-- Service 12 -->
                <a href="https://enic-kazakhstan.edu.kz/analytical_materials/nacionalnaya-ramka-kvalifikacii-vysshego-obrazovaniya-1"
                   class="service-card" target="_blank">
                    <div class="service-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                             stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                             class="icon">
                            <path d="M22 10v6M2 10l10-5 10 5-10 5z"></path>
                            <path d="M6 12v5c3 3 9 3 12 0v-5"></path>
                        </svg>
                    </div>
                    <h3 class="service-title">{% tr "Национальная система квалификаций" %}</h3>
                    <p class="service-description">{% tr "Информация о системе квалификаций" %}</p>
                </a>

                <!-- Service 13 -->
                <a href="https://enic-kazakhstan.edu.kz/otkrytyy-dostup-k-vysshemu-obrazovaniyu/vuzy-1"
                   class="service-card" target="_blank">
                    <div class="service-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                             stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                             class="icon">
                            <circle cx="12" cy="12" r="10"></circle>
                            <circle cx="12" cy="10" r="3"></circle>
                            <path d="M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662"></path>
                        </svg>
                    </div>
                    <h3 class="service-title">{% tr "Открытый доступ к высшему образованию" %}</h3>
                    <p class="service-description">{% tr "Инициативы по обеспечению доступности образования" %}</p>
                </a>

                <!-- Service 14 -->
                <a href="https://enic-kazakhstan.edu.kz/attraction_of_foreign_scientists/documents" class="service-card"
                   target="_blank">
                    <div class="service-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                             stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                             class="icon">
                            <path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                            <circle cx="8.5" cy="7" r="4"></circle>
                            <line x1="20" y1="8" x2="20" y2="14"></line>
                            <line x1="23" y1="11" x2="17" y2="11"></line>
                        </svg>
                    </div>
                    <h3 class="service-title">{% tr "Привлечение зарубежных специалистов" %}</h3>
                    <p class="service-description">{% tr "Программы привлечения зарубежных экспертов" %}</p>
                </a>

                <!-- Service 15 -->
                <a href="https://enic-kazakhstan.edu.kz/rasshirenie-avtonomii-vuzov/rasshirenie-samostoyatelnosti-vuzov-1"
                   class="service-card" target="_blank">
                    <div class="service-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                             stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                             class="icon">
                            <rect x="2" y="2" width="20" height="20" rx="5" ry="5"></rect>
                            <path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"></path>
                            <line x1="17.5" y1="6.5" x2="17.51" y2="6.5"></line>
                        </svg>
                    </div>
                    <h3 class="service-title">{% tr "Расширение автономии вузов" %}</h3>
                    <p class="service-description">{% tr "Инициативы по расширению автономии вузов" %}</p>
                </a>

                <!-- Service 16 -->
                <a href="#" class="service-card" target="_blank">
                    <div class="service-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                             stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                             class="icon">
                            <ellipse cx="12" cy="5" rx="9" ry="3"></ellipse>
                            <path d="M21 12c0 1.66-4 3-9 3s-9-1.34-9-3"></path>
                            <path d="M3 5v14c0 1.66 4 3 9 3s9-1.34 9-3V5"></path>
                        </svg>
                    </div>
                    <h3 class="service-title">{% tr "Реестр образовательных программ" %}</h3>
                    <p class="service-description">{% tr "База данных образовательных программ" %}</p>
                </a>
            </div>
        </div>
    </section>



    <!-- Новости и события -->
    <section class="news-events">
        <div class="container">
            <h2 class="section-title">{% tr "Новости и события" %}</h2>

            <div class="news-events-grid">
                {% include 'common/partial/news_home_page.html' %}

                <!-- События -->
                <div class="events-section">
                    <h3 class="subsection-title">{% tr "События" %}</h3>

                    <div class="events-tabs">
                        <div class="tabs-header">
                            <button class="tab-button active" data-tab="list">{% tr "Список" %}</button>
                            <button class="tab-button" data-tab="calendar">{% tr "Календарь" %}</button>
                        </div>

                        <!-- TAB 1: Список -->
                        <div class="tab-content active" id="list-tab">
                            <div class="events-list">
                                {% for event in events %}
                                    <div class="event-card">
                                        <p class="event-date">{{ event.datetime|date:"d.m.Y, H:i" }}</p>
                                        <h4 class="event-title">
                                            {% if current_lang_code == "kz" and event.title_kz %}
                                                {{ event.title_kz }}
                                            {% elif current_lang_code == "eng" and event.title_en %}
                                                {{ event.title_en }}
                                            {% else %}
                                                {{ event.title_ru }}
                                            {% endif %}
                                        </h4>
                                        <p class="event-location">
                                            {% if current_lang_code == "kz" and event.location_kz %}
                                                {{ event.location_kz }}
                                            {% elif current_lang_code == "eng" and event.location_en %}
                                                {{ event.location_en }}
                                            {% else %}
                                                {{ event.location_ru }}
                                            {% endif %}
                                        </p>
                                        <a href="{% url 'event_detail' event.pk %}"
                                           class="event-link">{% tr "Подробнее" %}</a>
                                    </div>
                                {% endfor %}
                            </div>
                        </div>

                        <!-- TAB 2: Календарь -->
                        <div class="tab-content" id="calendar-tab">
                            <div class="calendar">
                                <div class="calendar-header">
                                    <h4 class="calendar-title" id="calendarTitle">{% tr "Май 2025" %}</h4>
                                </div>
                                <div class="calendar-grid">
                                    <div class="calendar-day-names">
                                        {% for day in week_days %}
                                            <div class="day-name">{% tr day %}</div>
                                        {% endfor %}
                                    </div>
                                    <div class="calendar-days" id="calendarDays"></div>
                                </div>
                                <div class="selected-date-events" id="selectedDateEvents"></div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </section>


    <!-- Партнеры -->
    <section class="partners">
        <div class="container">
            <h2 class="section-title">{% tr "Наши партнёры" %}</h2>

            <div class="partners-slider-container">
                <!-- <button class="partner-nav prev" aria-label="{% tr 'Предыдущие партнеры' %}">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon">
          <polyline points="15 18 9 12 15 6"></polyline>
        </svg>
      </button> -->

                <div class="partners-slider" id="partnersSlider">
                    <div class="partner-item">
                        <img src="https://enic-kazakhstan.edu.kz/uploads/partners/14/logo.png"
                             alt="{% tr 'Болонский процесс' %}" class="partner-logo">
                        <p class="partner-name">{% tr "Болонский процесс" %}</p>
                    </div>
                    <div class="partner-item">
                        <img src="https://enic-kazakhstan.edu.kz/uploads/partners/13/logo.png"
                             alt="{% tr 'ENIC-NARIC' %}" class="partner-logo">
                        <p class="partner-name">{% tr "ENIC-NARIC" %}</p>
                    </div>
                    <div class="partner-item">
                        <img src="https://enic-kazakhstan.edu.kz/uploads/partners/12/logo.png"
                             alt="{% tr 'European Students” Union' %}" class="partner-logo">
                        <p class="partner-name">{% tr "European Students’ Union" %}</p>
                    </div>
                    <div class="partner-item">
                        <img src="https://enic-kazakhstan.edu.kz/uploads/partners/11/logo.png"
                             alt="{% tr 'EQAR' %}" class="partner-logo">
                        <p class="partner-name">{% tr "EQAR" %}</p>
                    </div>
                    <div class="partner-item">
                        <img src="https://enic-kazakhstan.edu.kz/uploads/partners/10/logo.png"
                             alt="{% tr 'European Association for Quality Assurance' %}" class="partner-logo">
                        <p class="partner-name">{% tr "European Association for Quality Assurance" %}</p>
                    </div>
                    <div class="partner-item">
                        <img src="https://enic-kazakhstan.edu.kz/uploads/partners/9/logo.png"
                             alt="{% tr 'EURASHE' %}" class="partner-logo">
                        <p class="partner-name">{% tr "EURASHE" %}</p>
                    </div>
                    <div class="partner-item">
                        <img src="https://enic-kazakhstan.edu.kz/uploads/partners/8/logo.png"
                             alt="{% tr 'European University Association' %}" class="partner-logo">
                        <p class="partner-name">{% tr "European University Association" %}</p>
                    </div>
                    <div class="partner-item">
                        <img src="https://enic-kazakhstan.edu.kz/uploads/partners/7/logo.png"
                             alt="{% tr 'European Higher Education Area' %}" class="partner-logo">
                        <p class="partner-name">{% tr "European Higher Education Area" %}</p>
                    </div>
                    <div class="partner-item">
                        <img src="https://enic-kazakhstan.edu.kz/uploads/partners/6/logo.png"
                             alt="{% tr 'Национальный информационный центр' %}" class="partner-logo">
                        <p class="partner-name">{% tr "Национальный информационный центр" %}</p>
                    </div>
                    <div class="partner-item">
                        <img src="https://enic-kazakhstan.edu.kz/uploads/partners/5/logo.png"
                             alt="{% tr 'Независимое агентство по обеспечению качества в образовании' %}"
                             class="partner-logo">
                        <p class="partner-name">{% tr "Независимое агентство по обеспечению качества в образовании" %}</p>
                    </div>
                    <div class="partner-item">
                        <img src="https://enic-kazakhstan.edu.kz/uploads/partners/4/logo.png"
                             alt="{% tr 'INDEPENDENT AGENCY FOR ACCREDITATION AND RATING' %}" class="partner-logo">
                        <p class="partner-name">{% tr "INDEPENDENT AGENCY FOR ACCREDITATION AND RATING" %}</p>
                    </div>
                </div>

                <!-- <button class="partner-nav next" aria-label="{% tr 'Следующие партнеры' %}">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon">
          <polyline points="9 18 15 12 9 6"></polyline>
        </svg>
      </button> -->
            </div>
        </div>
    </section>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const tabButtons = document.querySelectorAll('.tab-button');
            const tabContents = document.querySelectorAll('.tab-content');
            const calendarDaysContainer = document.getElementById('calendarDays');
            const calendarTitle = document.getElementById('calendarTitle');
            const selectedDateEvents = document.getElementById('selectedDateEvents');

            // Язык
            const langMap = {
                kk: 'kz',
                en: 'eng',
                ru: 'ru',
            };

            const lang = langMap["{{ current_lang_code }}"] || 'ru';


            // Переключение табов
            tabButtons.forEach(btn => {
                btn.addEventListener('click', () => {
                    tabButtons.forEach(b => b.classList.remove('active'));
                    tabContents.forEach(c => c.classList.remove('active'));

                    btn.classList.add('active');
                    const target = btn.getAttribute('data-tab');
                    document.getElementById(target + '-tab').classList.add('active');
                });
            });

            // Построение календаря текущего месяца
            const today = new Date();
            const year = today.getFullYear();
            const month = today.getMonth(); // 0-11

            const monthNames = {
                ru: ["Январь", "Февраль", "Март", "Апрель", "Май", "Июнь",
                    "Июль", "Август", "Сентябрь", "Октябрь", "Ноябрь", "Декабрь"],
                kz: ["Қаңтар", "Ақпан", "Наурыз", "Сәуір", "Мамыр", "Маусым",
                    "Шілде", "Тамыз", "Қыркүйек", "Қазан", "Қараша", "Желтоқсан"],
                eng: ["January", "February", "March", "April", "May", "June",
                    "July", "August", "September", "October", "November", "December"]
            };

            calendarTitle.innerText = `${monthNames[lang][month]} ${year}`;

            const firstDay = new Date(year, month, 1).getDay(); // 0 (вс) — 6 (сб)
            const daysInMonth = new Date(year, month + 1, 0).getDate();

            const offset = (firstDay + 6) % 7; // чтобы Пн был первым
            for (let i = 0; i < offset; i++) {
                calendarDaysContainer.innerHTML += `<button class="calendar-day empty"></button>`;
            }

            for (let d = 1; d <= daysInMonth; d++) {
                calendarDaysContainer.innerHTML += `<button class="calendar-day" data-day="${d}">${d}</button>`;
            }

            // AJAX-запрос на события
            fetch(`/api/events-by-month/?year=${year}&month=${month + 1}&lang=${lang}`)
                .then(res => res.json())
                .then(data => {
                    Object.entries(data).forEach(([day, events]) => {
                        const btn = calendarDaysContainer.querySelector(`.calendar-day[data-day="${day}"]`);
                        if (!btn) return;

                        btn.classList.add('has-event');
                        btn.addEventListener('click', () => {
                            selectedDateEvents.innerHTML = events.map(e => `
                        <div class="event-card">
                          <p class="event-date">${e.time}</p>
                          <h4 class="event-title">${e.title}</h4>
                          <p class="event-location">${e.location}</p>
                          <a href="/events/${e.id}/" class="event-link">{% tr "Подробнее" %}</a>
                        </div>
                      `).join('');
                        });
                    });
                });
        });
    </script>


{% endblock content %}
